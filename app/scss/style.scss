@use 'header';
@use 'aboutme';
@use 'contactme';
@use 'experience';
@use 'skills';
@use 'references';
@use 'education';

// Змінні
$colors: (
  grey: rgb(69, 69, 69),
  red: #c40e0e,
  light-grey: #d3d3d3,
  dark-grey: #454545,
  very-light-grey: #f0f0f0,
  white: white,
  black: black
);

$fonts: (
  primary: 'Arial, sans-serif',
  size-base: 16px,
  weight-normal: 400,
  weight-bold: 700
);

$spacing: (
  xs: 10px,
  sm: 15px,
  md: 20px,
  lg: 30px,
  xl: 50px,
  xxl: 100px
);

$breakpoints: (
  tablet: 992px,
  mobile: 768px,
  small-mobile: 480px
);

// Функції для отримання значень
@function color($key) {
  @return map-get($colors, $key);
}

@function font($key) {
  @return map-get($fonts, $key);
}

@function spacing($key) {
  @return map-get($spacing, $key);
}

// Міксіни
@mixin responsive-property($property, $desktop, $tablet, $mobile) {
  #{$property}: $desktop;
  
  @media (max-width: map-get($breakpoints, tablet)) {
    #{$property}: $tablet;
  }
  
  @media (max-width: map-get($breakpoints, mobile)) {
    #{$property}: $mobile;
  }
}

@mixin flex-center($direction: row) {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: $direction;
}

@mixin section-styles($bg-color: color(white)) {
  background: $bg-color;
  display: flex;
  flex-direction: column;
  height: auto;
  min-height: 0;
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

@mixin title-colors($type: 'default') {
  @if $type == 'grey' {
    color: color(grey) !important;
  } @else if $type == 'red' {
    color: color(red) !important;
  }
}

// Базові стилі для секцій
%base-section {
  @include section-styles;
  position: relative;
}

%content-block {
  background: transparent;
  padding: spacing(md) 0;
  box-sizing: border-box;
}

%responsive-container {
  width: 100%;
  margin: 0 auto;
  padding: 0 spacing(sm);
  
  @media (max-width: map-get($breakpoints, mobile)) {
    padding: 0 spacing(xs);
  }
}

// Основний контейнер з сірою рамкою
body {
  margin: 0;
  font-family: font(primary);
  font-size: font(size-base);
  background-color: color(white);
  position: relative;
  min-height: 100vh;
  padding-bottom: 0;
}

.main-container {
  
  border: spacing(xxl) solid color(light-grey);
  position: relative;
  min-height: calc(100vh - #{spacing(xxl) * 2}); // Математична операція
  box-sizing: border-box;
  background: color(white);
  overflow: visible;
  
  @include responsive-property(border-width, spacing(xxl), spacing(lg), spacing(md));

  &::before {
    content: '';
    position: absolute;
    top: -#{spacing(xxl)};
    left: -#{spacing(xxl)};
    right: -#{spacing(xxl)};
    bottom: -#{spacing(xxl)};
    box-shadow: inset 0 0 #{spacing(xl)} rgba(0,0,0,0.4);
    pointer-events: none;
    z-index: -1;
    
    @include responsive-property(top, -#{spacing(xxl)}, -#{spacing(lg)}, -#{spacing(md)});
    @include responsive-property(left, -#{spacing(xxl)}, -#{spacing(lg)}, -#{spacing(md)});
    @include responsive-property(right, -#{spacing(xxl)}, -#{spacing(lg)}, -#{spacing(md)});
    @include responsive-property(bottom, -#{spacing(xxl)}, -#{spacing(lg)}, -#{spacing(md)});
  }
}

// Забезпечуємо правильну роботу з Bootstrap
.container-fluid {
  @extend %responsive-container;
  padding: 0;
  margin: 0;
}

// Структура для двох колонок
.equal-height-columns {
  display: flex;
  flex-wrap: wrap;
  margin: 0;

  .col-md-6 {
    flex: 0 0 50%;
    max-width: 50%;
    padding: 0;
    display: flex;
    flex-direction: column;
    
    @media (max-width: map-get($breakpoints, tablet)) {
      flex: 0 0 100%;
      max-width: 100%;
    }
  }
}

// Стилі для блоків з наслідуванням
.experience-block,
.skills-block,
.references-block,
.education-block,
.hobbies-block {
  @extend %base-section;
}

// Видаляємо зайві відступи між секціями
.references-section,
.education-section {
  margin-bottom: 0 !important;
  padding-bottom: 0 !important;
}

// Загальні стилі для section-title з використанням міксінів
.section-title {
  @include flex-center;
  gap: spacing(sm);
  text-align: center;
  font-size: calc(#{font(size-base)} * 2.1875); // 35px
  font-weight: font(weight-bold);
  text-transform: uppercase;
  margin-bottom: spacing(lg);
  
  // Кольори для заголовків через міксін
  .references-section &,
  .about-me-block &,
  .contact-section & {
    @include title-colors('grey');
  }

  .experience-section &,
  .education-section &,
  .skills-section &,
  .hobbies-section & {
    @include title-colors('red');
  }
  
  @media (max-width: map-get($breakpoints, mobile)) {
    font-size: calc(#{font(size-base)} * 1.5); // 24px
    margin-bottom: spacing(md);
  }
  
  @media (max-width: map-get($breakpoints, small-mobile)) {
    font-size: calc(#{font(size-base)} * 1.25); // 20px
    gap: spacing(xs);
  }
}

// Обмежуємо максимальну ширину фото
.profile-photo,
.header-block img {
  max-width: 100%;
  height: auto;
  max-height: calc(100vh - #{spacing(xxl) * 2});
}

// Переконайтеся, що всі блоки не виходять за межі
.left-column,
.right-column {
  @extend %content-block;
}

// Специфічні виправи для references та education секцій
.references-block + .education-block,
.references-section + .education-section {
  margin-top: 0;
  padding-top: 0;
}

// Адаптивність для планшетів
@media (max-width: map-get($breakpoints, tablet)) {
  .left-column {
    .red-block {
      width: 400px;
      height: 250px;
      margin-left: -#{spacing(lg)};
      margin-bottom: -200px;
    }
  }

  .name-role {
    width: 380px;
    padding: spacing(lg) spacing(md) spacing(md) 80px;

    .name,
    .surname {
      font-size: calc(#{font(size-base)} * 3.125); // 50px
    }
  }

  .header-block {
    .photo {
      max-width: 280px;
      margin-bottom: spacing(xl);
    }
  }

  .right-column {
    .about-me-block {
      margin-left: -#{spacing(md)};
      padding-left: spacing(lg);

      .section-title {
        font-size: calc(#{font(size-base)} * 1.5); // 24px
        padding: spacing(lg) spacing(md) 0 spacing(md);
      }

      p {
        font-size: calc(#{font(size-base)} * 1.125); // 18px
        padding: 0 spacing(md) spacing(lg) spacing(md);
      }
    }
  }

  .contact-section {
    padding: spacing(lg) 0 spacing(lg) 60px;
    height: auto;
    min-height: 200px;

    .contact-info {
      flex-direction: column;
      gap: spacing(xs);

      .col-6 {
        width: 100%;
      }
    }
  }

  // Виправлення для мобільних
  .references-section,
  .education-section {
    padding: spacing(md) 0 !important;
  }
}

// Адаптивність для мобільних
@media (max-width: map-get($breakpoints, mobile)) {
  .left-column {
    min-height: auto;

    .red-block {
      width: 100%;
      max-width: 300px;
      height: 200px;
      margin: spacing(md) auto -150px;
      left: 0;
      right: 0;
    }
  }

  .header-block {
    text-align: center;
    padding: spacing(md);

    .photo {
      margin: 0 auto spacing(lg);
      border-radius: spacing(md);
      max-width: 250px;
    }
  }

  .name-role {
    width: 100%;
    max-width: 320px;
    margin: -100px auto 0;
    padding: 25px spacing(sm) spacing(sm) 25px;

    .name,
    .surname {
      font-size: calc(#{font(size-base)} * 2.5); // 40px
    }

    .role {
      font-size: font(size-base);
    }
  }

  .right-column {
    .about-me-block {
      margin-left: 0;
      border-left: none;
      border-top: 8px solid color(light-grey);
      padding: spacing(md);

      &::after {
        display: none;
      }

      .section-title {
        font-size: calc(#{font(size-base)} * 1.375); // 22px
        padding: spacing(md) spacing(xs) 0 spacing(xs);
      }

      p {
        font-size: font(size-base);
        padding: 0 spacing(xs) spacing(md) spacing(xs);
      }
    }
  }

  .contact-section {
    padding: spacing(md);
    margin: 0;
    width: 100%;

    .section-title {
      font-size: calc(#{font(size-base)} * 1.375); // 22px
      margin-bottom: spacing(md);
    }

    .contact-info {
      li {
        font-size: font(size-base);
      }
    }
  }

  .experience-section,
  .education-section,
  .skills-section,
  .references-section,
  .hobbies-section {
    padding: spacing(md) 0;

    .section-title {
      font-size: calc(#{font(size-base)} * 1.5); // 24px
      margin-bottom: spacing(md);
    }
  }

  .skills-container {
    grid-template-columns: 1fr;
    gap: 25px;
    padding: 0 spacing(md);
  }

  // Видаляємо розриви між секціями
  .references-block,
  .education-block {
    margin-bottom: 0;
    padding-bottom: 0;
  }
}

// Додаткові корективи для дуже малих екранів
@media (max-width: map-get($breakpoints, small-mobile)) {
  .name-role {
    .name,
    .surname {
      font-size: calc(#{font(size-base)} * 2); // 32px
    }
  }

  .skill-header {
    @include flex-center(column);
    align-items: flex-start;
    gap: spacing(xs);
  }

  .experience-section,
  .education-section,
  .skills-section,
  .references-section,
  .hobbies-section {
    padding: spacing(sm) 0;
  }
}

// Додатковий клас для демонстрації наслідування
.content-section {
  @extend %base-section;
  @extend %content-block;
  
  &--padded {
    padding: spacing(lg) 0;
    
    @media (max-width: map-get($breakpoints, mobile)) {
      padding: spacing(md) 0;
    }
  }
}
.footer-features {
  position: absolute;
  bottom: -100px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 40px;
  align-items: center;
  background: color(light-grey);
  padding: 20px 40px; // Зменшено вертикальний padding
  border-radius: 10px 10px 0 0;
  z-index: 100 !important;
  
  @media (max-width: map-get($breakpoints, tablet)) {
    gap: 30px;
    padding: 15px 30px;
    bottom: -50px;
  }
  
  @media (max-width: map-get($breakpoints, mobile)) {
    gap: 20px;
    padding: 12px 20px;
    bottom: -40px;
    flex-wrap: wrap;
    justify-content: center;
  }
}

.feature-item {
  display: flex;
  align-items: center;
  gap: 15px;
  color: color(grey);
  font-size: calc(#{font(size-base)} * 0.875);
  font-weight: font(weight-bold);
  text-transform: uppercase;
  line-height: 1.3;
  
  @media (max-width: map-get($breakpoints, tablet)) {
    gap: 12px;
  }
  
  @media (max-width: map-get($breakpoints, mobile)) {
    font-size: calc(#{font(size-base)} * 0.75);
    flex: 0 0 calc(33.333% - 20px);
    flex-direction: column;
    text-align: center;
    gap: 8px;
  }
  
  @media (max-width: map-get($breakpoints, small-mobile)) {
    flex: 0 0 calc(50% - 10px);
    font-size: calc(#{font(size-base)} * 0.6875);
  }
}

.footer-features i {
  font-size: 24px;
  color: color(dark-grey);
  flex-shrink: 0;
  
  @media (max-width: map-get($breakpoints, mobile)) {
    font-size: 20px;
  }
}